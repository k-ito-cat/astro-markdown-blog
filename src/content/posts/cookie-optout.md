---
title: "[WIP] cookie 同意"
publishedAt: "2025-04-22"
thumbnail: { src: "/images/thumbnail/noimage.png", alt: "cookie 同意" }
githubUrl: ""
categories: ["Cookie", "プライバシー"]
---

トラッキングやセッションの保持などによるCookieの使用時に意識していかなければならないこと

## Cookie オプトアウト（拒否）とオプトイン（同意）

以下のような Cookie　同意バナー をたびたびサイトで見ることがある。

![alt text](/images/image02.png)

これはいったいどういった取り組みなのか

[Cookie に関する規制 - MDN](https://developer.mozilla.org/ja/docs/Web/HTTP/Guides/Cookies#cookie_%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E8%A6%8F%E5%88%B6)

> Cookie の使用を対象とした法規制には、以下のようなものがあります。
>
> - EU の 一般データ保護規則 (GDPR)
> - EU の ePrivacy 指令
> - カリフォルニア州消費者プライバシー法
>
> これらの規制は、これらの管轄区域（EU とカリフォルニア州、特にカリフォルニア州の法律は総収入が 2,500 万ドルを超える事業体にのみ適用されるという注意事項がある）のユーザーがアクセスする全世界のウェブ上のあらゆるサイトに適用されるため、世界的な広がりを持っています。

これはEUの加盟国における法律であり、開発者が守らなければならない法律

Cookie同意バナーは、ジオロケーション（IPアドレス等）からユーザーがEU圏内からアクセスしていると判断した場合に表示されるよう設定されることが一般的

よって、日本は対象外

EUに住むユーザーの個人情報を守るための法律。

> - サイトが Cookie を使用することをユーザーに通知すること。
> - ユーザーが一部またはすべての Cookie をオプトアウトできるようにすること
> - ユーザーが Cookie を受け取らなくても、サービスの大部分を利用できるようにすること。

とあるように、通知・オプトアウト可能にすること、cookieを受け取らなくてもサービスの大部分を利用できるようにすること
という条件がある

EUではGDPRというデータ保護規則の一環で、個人データの処理に関する包括的な法的枠組みらしい

Cookieは主にセッションの維持や、ＧＡなどのトラッキング目的としてCookieがブラウザに保持されることがある。

EUでオプトインが必須化された動きにより、日本でもその動向が注目され、必須ではないが日本でもそのような取り組みをしているサイトをよく見る。

### 日本のcookieをつかっているサイトに、euの国の人が閲覧している場合、日本のそのサイトは罰則の対象となる？

はい、罰則の対象となる可能性があります
GDPRやePrivacy指令などのEUのプライバシー法は域外適用の原則を持っています。つまり、企業の所在地に関わらず、EUに居住するユーザーの個人データを処理する場合には適用されます。

具体的な適用条件
日本のサイトがGDPRの対象となる条件：

EUに拠点がある場合（日本企業のEU支社など）

EU居住者に向けたサービス提供を積極的に行っている場合

EU言語でのサイト提供
EUの通貨での決済対応
EU市場を明確にターゲットにしている
EU居住者の行動監視を行っている場合

Cookieによるトラッキング
プロファイリング
行動ターゲティング広告

## サービス

cookie first

## 実装方法とベストプラクティス

https://web.dev/articles/cookie-notice-best-practices?hl=ja

> パフォーマンスとユーザビリティを重視して Cookie に関する通知を最適化する。

## どの用途の Cookie が対象になるか

. どの Cookie が対象になるか

用途

例

同意要否（EU 例）

メモ

必須 (Strictly necessary)

セッション ID、ログイン保持

不要

認証・カート保持などサイト機能に不可欠

計測 (Analytics)

Google Analytics、Matomo

必要

GA4 は IP 匿名化等でも同意要件は変わらず

広告 (Marketing)

Google Ads、Facebook Pixel

必要

TCF v2.2 など CMP 経由で取得

機能向上 (Preferences)

言語選択、UI 設定

必要

ユーザー設定を跨ぐ場合は要同意

## サービス実装パターン

4‑1. Cookie‑First CMP

CookieFirst などの Consent Management Platform (CMP) を使い、ページ読込直後に

ジオロケーション判定（EU/UK 訪問か）

バナー表示 → 目的別チェックボックス

記録を localStorage or サーバーへ保存

同意内容を gtag などへ動的反映（gtag('consent',...)）
